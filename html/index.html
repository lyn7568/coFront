<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title></title>
		<link href="../css/common.css" rel="stylesheet" type="text/css" />
		<link href="../ajax/dyn/auth.css" rel="stylesheet" type="text/css" />
		<style>
			.page-head {
				width: 100%;
				padding: 0 20px;
				color: #999;
				height: 60px;
				background-color: #444;
				min-width: 1040px;
				/*overflow: hidden;*/
			}
			
			.page-logo {
				display: block;
				width: 140px;
				height: 60px;
				background: url("../images/logo.png") left center no-repeat;
			}
			
			.page-home {
				padding: 10px 15px;
			}
			
			.page-home i {
				font-size: 40px;
			}
			
			.page-head-right .logout, .page-head-right .help, .page-head-right .user-msg {
				height: 30px;
				margin: 15px;
				cursor: pointer;
			}
			
			.page-head-right div i {
				font-size: 30px;
			}
			
			.user-info {
				height: 40px;
				margin: 10px;
				font-size: 15px;
				color: #fff !important;
				text-align: center;
				position: relative;
			}
			
			.user-info .login-user-head {
				height: 40px;
				width: 40px;
				border-radius: 50%;
			}
			
			.user-info .login-user-name {
				margin-left: 10px;
			}
			
			.user-info i {
				margin-top: 15px;
			}
			
			.page-menu {
				position: absolute;
				top: 60px;
				left: 0;
				width: 240px;
				bottom: 0;
				font-size: 20px;
				background-color: #fafafa;
				border: 1px solid #c7c7c7;
				overflow-x: visible;
			}
			
			.spa-main {
				position: absolute;
				top: 60px;
				left: 240px;
				right: 0px;
				bottom: 0;
				padding: 10px;
			}
			
			#g_info {
				top: 60px;
			}
			
			.user-info.dd-ctn .dd-drop {
				top: 100%;
				z-index: 100;
				color: #000000;
			}
			
			.user-info.dd-ctn .dd-drop li {
				padding: 5px;
				cursor: pointer;
			}
		</style>
	</head>

	<body class="spa-page" resource="../ajax/sys/resource/user" menu="../ajax/user/config/menu" style="padding: 0;">
		<div class="page-head">
			<div class="page-head-left pull-left">
				<a class="page-logo pull-left"></a>
				<div class="page-home pull-left">
					<i class="icon-home"></i>
				</div>
			</div>
			<div class="page-head-right pull-right">
				<div class="logout pull-right">
					<i class="icon-signout opt-logout"></i>
				</div>
				<div class="help pull-right">
					<i class="icon-question-sign"></i>
				</div>
				<div class="user-msg pull-right">
					<i class="icon-envelope"></i>
				</div>
				<a class="user-info pull-right dd-ctn "> <img class="login-user-head" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAIAAABJObGsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ0NkMxNDMyMTgxMTFFNTk0NTM4MzgwOUQ4QTlBMjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ0NkMxNDQyMTgxMTFFNTk0NTM4MzgwOUQ4QTlBMjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDQ2QzE0MTIxODExMUU1OTQ1MzgzODA5RDhBOUEyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDQ2QzE0MjIxODExMUU1OTQ1MzgzODA5RDhBOUEyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkQ1VQMAAA9GSURBVHja7J0Hc9tG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" />
					<span class="login-user-name dd-hand">linux linux</span> <i class="icon-caret-down"></i>
					<ul class="dd-drop">
						<li class="opt-user-info-cfg">个人信息设置</li>
						<li class="opt-user-menu-cfg">个人菜单设置</li>
						<li class="opt-user-cp-cfg">修改密码</li>
					</ul>
				</a>
			</div>
		</div>
		<div class="page-menu">
			<div class="spa-menu menu"></div>
		</div>
		<div class="spa-main"></div>
		<div class="page-foot"></div>
		<div id='g_info'>
			<div id='g_err'></div>
			<div id='g_warn'></div>
			<div id='g_msg'></div>
		</div>
		<div id='g_loading' style="display: none;">
			<div>
				<i class='icon icon-spin icon-spinner-snake'></i>
			</div>
		</div>

	</body>
	<script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
	<script type="text/javascript" src="../js/common.js"></script>
	<script type="text/javascript" src="../js/form.js"></script>
	<script type="text/javascript" src="../js/dict.js"></script>
	<script type="text/javascript" src="../js/text.js"></script>
	<script type="text/javascript" src="../js/textarea.js"></script>
	<script type="text/javascript" src="../js/dropdown.js"></script>
	<script type="text/javascript" src="../js/select.js"></script>
	<script type="text/javascript" src="../js/date.js"></script>
	<script type="text/javascript" src="../js/pager.js"></script>
	<script type="text/javascript" src="../js/codehtml.js"></script>
	<script type="text/javascript" src="../js/datagrid.js"></script>
	<script type="text/javascript" src="../js/pageDataGrid.js"></script>
	<script type="text/javascript" src="../js/spa.js"></script>
	<script type="text/javascript" src="../js/upload.js"></script>
	<script type="text/javascript" src="../js/dyn-select.js"></script>
	<script type="text/javascript" src="../js/validate.js" ></script>
	<script type="text/javascript" src="../js/echarts.common.min.js"></script>
	<script type="text/javascript" src="../js/typeahead.js"></script>
	<script type="text/javascript" src="../js/webuploader.js"></script>
	<script type="text/javascript" src="../js/city.min.js"></script>

	<script>
		$(function() {
			$.use(["spa", "util"], function(spa, util) {
				util.get("../ajax/sys/user", null, function(data) {
					util.data("loginUser", data);
					$(".login-user-name").text(data.name);
					if(data.head) {
						$(".login-user-head").attr("src", "../data/" + data.head);
					}
				}, {});
				spa.build();
				$(".opt-logout").on("click", function() {
					util.get("../ajax/sys/user/logout", null, function() {
						window.location.href = "login.html";
					}, {});
				});
				var g_max_menu_id = 1,
					g_m = function(ret, items) {
						if(items && items.length) {
							var chs = ret.children = [];
							items.forEach(function(item) {
								var rd = {};
								++g_max_menu_id;
								rd.code = g_max_menu_id;
								rd.caption = item.caption;
								if(item.res) {
									rd.res = item.res
									rd.icon = item.icon || "book";
								} else {
									rd.icon = item.icon || "branch";
								}
								if(item.modal) {
									rd.modal = true;
								}
								g_m(rd, item.children);
								chs.push(rd);
							});
						}
					}
				$(".opt-user-menu-cfg").on("click", function() {
					var pData = {},
						show = function() {
							if(pData.children && pData.reses) {
								spa.showModal("sys_user_menu_cfg", pData);
							}
						};

					util.get("../ajax/user/config/menu", null, function(data) {
						g_m(pData, data);
						show();
					});
					util.get("../ajax/sys/resource/user", null, function(data) {
						var reses = pData.reses = [];
						data.forEach(function(item) {
							if(item.main) {
								var rd = { code: item.id, caption: item.name, enabled: true };
								reses.push(rd);
							}
						});
						show();
					});

				});
				$(".opt-user-info-cfg").on("click", function() {
                    util.get("../ajax/sys/user/id/" + util.data("loginUser").id, null, function(data) {
                        spa.showModal("sys_user_edit", { data: data})
                    },{});
				});
				$(".opt-user-cp-cfg").on("click", function() {
                    spa.showModal("sys_user_cp");
				});

			});
		});
	</script>

</html>
</html>