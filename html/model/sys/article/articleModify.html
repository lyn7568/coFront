<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>修改文章-科袖网</title>
    <!--<link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" media="screen" />-->
    <!--<link href="css/bootstrap.min.css" rel="stylesheet">-->
    <!--<link type="text/css" href="css/webuploader/webuploader.css" rel="stylesheet">-->
    <!--<link type="text/css" rel="stylesheet" href="css/datetimepicker.css">-->
    <!--<link type="text/css" href="css/webuploader/webuploader.css" rel="stylesheet">-->
    <!--<link type="text/css" href="css/common.css" rel="stylesheet">-->
    <link type="text/css" href="../../../../css/model/sys/articleModify.css" rel="stylesheet">
    <script type="text/javascript" src="../../../../js/jquery-1.12.4.js"></script>

</head>

<body>
<header id="header">
    <!--<script src="js/header.js"></script>-->
</header>
<!--定时发布弹框-->
<!--<div class="blackcover2"></div>-->
<!--<div class="setTimeBlock modelContain">-->
<!--<span class="mb_tit">提示</span>-->
<!--<a class="mb_close"></a>-->
<!--<div class="mb_msg">-->
<!--<p style="margin: 10px;">请设置文章发布的时间：</p>-->
<!--<div class="formTime">-->
<!--&lt;!&ndash;<div class="form-group">-->
<!--<div class='input-group date' id='datetimepicker6'>-->
<!--<input type='text' class="form-control" />-->
<!--<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>-->
<!--</div>-->
<!--</div>&ndash;&gt;-->
<!--<div class="form-group">-->
<!--<input size="16" type="text" value="" readonly class="form-control form_datetime">-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--<div class="mb_btnbox">-->
<!--<input class="mb_btn mb_btnOk" type="button" value="确定">-->
<!--<input class="mb_btn mb_btnNo" type="button" value="取消">-->
<!--</div>-->
<!--</div>-->

<div id="container">
    <div class="containerCon">
        <div class="contentCon clearfix conBlock">
            <div class="leftconBox floatL">
                <ul class="artAbout">
                    <li>
                        <div class="uploadFile">
                            <div class="uploadblock" id="uploader" data-id>
                                <span class="" id="filePicker">上传图片</span>
                                <!--未上传图片时-->
                                <div class="upFront">
                                    <p>文章封面大图<em class="requiredcon">*</em></p>
                                    <p class="uploadtip">JPG/PNG格式，2M以内</p>
                                    <span class="upbtn">上传图片</span>
                                </div>
                                <!--已上传图片时-->
                                <span class="upbtn upBackbtn">更换图片</span>
                            </div>
                        </div>
                        <span class="frmconmsg imgtis" style="margin-left:0"></span>
                    </li>
                    <li>
                        <div class="aboutTit" id="aboutTit">标题<em class="requiredcon">*</em><span class="frmconmsg"></span></div>
                        <input type="text" class="frmtype frmcontype" value="" placeholder="请输入标题" id="newstitle"/>
                    </li>
                    <li class="form-item">
                        <div class="aboutTit">关键词<span class="frmconmsg" id="keyPrompt"></span></div>
                        <div style="position: relative;">
                            <input type="text" class="frmtype frmcontype" value="" placeholder="请输入关键词" id="KeyWord"/>
                            <!--输入框中键入内容时按钮显示，添加内容出现在结果标签中时按钮隐藏-->
                            <button class="frmcontype frmadd displayNone" id="addkeyWord">添加</button>
                        </div>
                        <div class="form-drop keydrop displayNone">
                            <ul id="keydropList">

                            </ul>
                        </div>
                        <div class="form-result keyResult">
                            <ul class="clearfix" id="keyWordlist">

                            </ul>
                        </div>
                    </li>
                    <li>
                        <div class="aboutTit">文章内容<span class="frmconmsg"></span></div>
                        <!--这块还是使用编辑框插件-->
                        <div class="editBlock">
                            <script id="editor" name="content" type="text/plain" style="height:500px;"></script>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="rightconBox floatR">
                <div class="conItem">
                    <ul class="operateBlock">
                        <li class="goFabu" id="release">
                            <em class="operateicon icon-issue"></em>
                            <p>发布</p>
                        </li>
                        <!--<li id="setTimeIssue">-->
                            <!--<em class="operateicon icon-timeissue"></em>-->
                            <!--<p>定时发布</p>-->
                        <!--</li>-->
                        <!--<li class="articalPreview" id="preview">-->
                            <!--<em class="operateicon icon-preview"></em>-->
                            <!--<p>预览</p>-->
                        <!--</li>-->
                        <!--<li id="draft">-->
                            <!--<em class="operateicon icon-draft"></em>-->
                            <!--<p>存草稿</p>-->
                        <!--</li>-->
                        <!--<li id="delete">-->
                            <!--<em class="operateicon icon-delete"></em>-->
                            <!--<p>删除</p>-->
                        <!--</li>-->

                    </ul>
                </div>
                <div class="conItem">
                    <div class="form-item otherBlock">
                        <div class="aboutTit">相关专家<span class="frmconmsg"></span></div>
                        <input type="text" class="frmtype frmcontype" placeholder="请输入专家姓名" id="checkZj" value="" />
                        <div class="form-drop displayNone">
                            <ul class="expertlist" id="expertlist">

                            </ul>
                        </div>
                        <div class="form-result">
                            <ul class="addexpert" id="expertli">

                            </ul>
                        </div>
                    </div>
                    <div class="form-item otherBlock">
                        <div class="aboutTit">相关资源<span class="frmconmsg"></span></div>
                        <input type="text" class="frmtype frmcontype" placeholder="请输入资源名称" id="checkZy" value="" />
                        <div class="form-drop displayNone">
                            <ul class="expertlist" id="resouselist">

                            </ul>
                        </div>
                        <div class="form-result">
                            <ul class="addexpert" id="resources">

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="footer_tools">
    <a id="scrollUp" href="javascript:;" title="返回顶部"></a>
</div>
<!--<footer>-->
<!--<script type="text/javascript" src="js/footer.js"></script>-->
<!--</footer>-->
<!--<script type="text/javascript" src="js/public/bootstrap.min.js"></script>-->
<!--<script type="text/javascript" src="js/public/prettify.js"></script>-->
<!--<script type="text/javascript" src="js/public/bootstrap-datetimepicker.min.js"></script>-->
<script type="text/javascript" src="../../../../js/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="../../../../js/ueditor/ueditor.all.js"> </script>
<script type="text/javascript" src="../../../../js/webuploader.js"></script>
<!--<script type="text/javascript"src="js/jquery.cookie.js"></script>-->
<script type="text/javascript" src="../../../../js/jquery.similar.msgbox.js"></script>
<!--<script type="text/javascript" src="js/common.js"></script>-->
<script type="text/javascript" src="../../../../js/model/sys/article/articleModify.js"></script>
<script type="text/javascript">
    $(function () {
        //回到顶部
        var $body = $(document.body);;
        var $bottomTools = $('.footer_tools');
        $(window).scroll(function () {
            var scrollHeight = $(document).height();
            var scrollTop = $(window).scrollTop();
            var $footerHeight = $('footer').outerHeight(true);
            var $windowHeight = $(window).innerHeight();
            scrollTop > 50 ? $("#scrollUp").fadeIn(200).css("display","block") : $("#scrollUp").fadeOut(200);
            $bottomTools.css("bottom", scrollHeight - scrollTop - $footerHeight > $windowHeight ? 20 : $windowHeight + scrollTop + $footerHeight + 20 - scrollHeight);
        });
        $('#scrollUp').click(function (e) {
            e.preventDefault();
            $('html,body').animate({ scrollTop:0});
        });

        var currentdate;
//    $(".form_datetime").datetimepicker({
//    	format: 'yyyy-mm-dd hh:ii',
//    	forceParse: true,
//    	autoclose: true,
//       // todayBtn: true
//    });
        function getNowFormatDate() {
            var date = new Date();
            var seperator1 = "-";
            var seperator2 = ":";
            var month = date.getMonth() + 1;
            var strDate = date.getDate();
            var getHours = date.getHours();
            var getMinutes = date.getMinutes();
            if (month >= 1 && month <= 9) {
                month = "0" + month;
            }
            if (strDate >= 0 && strDate <= 9) {
                strDate = "0" + strDate;
            }
            if (getMinutes >= 0 && getMinutes <= 9) {
                getMinutes = "0" + getMinutes;
            }
            if (getHours >= 0 && getHours <= 9) {
                getHours = "0" + getHours;
            }
            var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
                + " " + getHours + seperator2 + getMinutes

            return currentdate;
        }
        $(".form_datetime").val(getNowFormatDate(currentdate));
    });
    //Model模态框打开关闭

    $(".mb_close,.mb_btnNo").click(function() {
        $(".modelContain").hide();
        $(".blackcover2").fadeOut();
        $("body").removeClass("modelOpen");
    })
    //初始引用编辑器
    ue = UE.getEditor('editor', {});

    // 初始化Web Uploader
    var uploader = WebUploader.create({
        // 选完文件后，是否自动上传。
        auto: true,
        // 添加的文件数量
        //fileNumLimit: 1,
        // swf文件路径
        swf: '../js/webuploader/Uploader.swf',
        // 文件接收服务端。
        server: '../ajax/cachedFileUpload',
        // 选择文件的按钮。可选。
        // 内部根据当前运行是创建，可能是input元素，也可能是flash.
        fileSingleSizeLimit: 2 * 1024 * 1024,
        duplicate:true,
        pick : {
            id : "#filePicker",
            multiple: false
        },
        // 只允许选择图片文件。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/gif,image/jpg,image/jpeg,image/bmp,image/png'
        }

    });
    uploader.onError = function(code) {
        if(code=="F_EXCEED_SIZE"){
            $.MsgBox.Alert('提示', '请上传jpg、png格式的图片，大小不超过2M')
        }
    };
    // 当有文件添加进来的时候
    uploader.on( 'fileQueued', function( file ) {
        uploader.makeThumb( file, function( error, src ) {
            $("#uploader").css("background-image","url("+src+")");
            $(".imgtis").text("");
            $(".upFront").hide();
            $(".upBackbtn").show();
        }, 1, 1 );

    });

    // 文件上传成功，给item添加成功class, 用样式标记上传成功。
    cacheImageKey="";
    uploader.on( 'uploadSuccess', function(file,data) {
        cacheImageKey =data.data[0].cacheKey;
        $("#uploader").attr("data-id",cacheImageKey);
    });

</script>
</body>
</html>
